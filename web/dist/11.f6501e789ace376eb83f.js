(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Yj9t:function(t,o,e){"use strict";e.r(o);var n=e("Valr"),i=e("QJY3"),r=e("oW1M"),a=e("R/Hu"),c=e("DUip"),s=e("imvL"),b=e("dICO"),l=e("TYT/");function g(t,o){if(1&t&&(l.Tb(0,"div"),l.Tb(1,"p",24),l.Tb(2,"span"),l.Fc(3),l.Sb(),l.Sb(),l.Sb()),2&t){var e=l.fc().$implicit;l.Bb(3),l.Gc(e.message)}}function u(t,o){if(1&t&&(l.Rb(0),l.Dc(1,g,4,1,"div",23),l.Qb()),2&t){var e=o.$implicit,n=l.fc();l.Bb(1),l.lc("ngIf",n.resetForm.get("email").hasError(e.type)&&(n.resetForm.get("email").dirty||n.resetForm.get("email").touched))}}var p=function(t){return{focused:t}},m=function(){function t(t,o,e,n,i){this.authService=t,this.notifyService=o,this.fb=e,this.loadingBar=n,this.router=i,this.imgLogo="assets/img/logo/mbpj-logo.png",this.resetFormMessages={email:[{type:"required",message:"Email is required"},{type:"email",message:"Please enter a valid email"}]}}return t.prototype.ngOnInit=function(){this.initForm()},t.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.initForm=function(){this.resetForm=this.fb.group({email:new i.d(null,i.t.compose([i.t.required,i.t.email]))})},t.prototype.reset=function(){var t=this;this.loadingBar.start(),this.subscription=this.authService.resetPassword(this.resetForm.value).subscribe((function(){t.loadingBar.complete()}),(function(){t.loadingBar.complete(),t.notifyService.openToastrWarning("Error","Please try again")}),(function(){t.notifyService.openToastrSuccess("Success","A reset link has been sent to your email")}))},t.prototype.navigatePage=function(t){if("login"==t)return this.router.navigate(["/auth/login"])},t.\u0275fac=function(o){return new(o||t)(l.Ob(s.a),l.Ob(b.a),l.Ob(i.c),l.Ob(a.c),l.Ob(c.e))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-forgot"]],decls:27,vars:7,consts:[[1,"main-content","auth-content","d-flex","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-7"],[1,"card","bg-secondary","border-0","mb-0"],[1,"card-body","px-lg-5","py-lg-5"],[1,"logo-box"],[1,"logo",3,"src"],[1,"h2","text-default","mt-3","mb-0"],[3,"formGroup"],[1,"form-group","mb-3",3,"ngClass"],[1,"input-group","input-group-alternative"],[1,"input-group-prepend"],[1,"input-group-text","bg-info"],[1,"fas","fa-envelope","text-white"],["placeholder","Email","type","email","formControlName","email",1,"form-control","text-dark",3,"focus","blur"],[4,"ngFor","ngForOf"],[1,"text-center"],["type","button",1,"btn","btn-info","btn-block","my-4",3,"disabled","click"],["type","button",1,"btn","btn-icon","btn-outline-info","btn-block","my-2",3,"click"],[1,"btn-inner--icon"],[1,"fas","fa-angle-left"],[1,"btn-inner--text"],[4,"ngIf"],[1,"error-message"]],template:function(t,o){1&t&&(l.Pb(0,"ngx-loading-bar"),l.Tb(1,"div",0),l.Tb(2,"div",1),l.Tb(3,"div",2),l.Tb(4,"div",3),l.Tb(5,"div",4),l.Tb(6,"div",5),l.Tb(7,"div",6),l.Pb(8,"img",7),l.Tb(9,"h6",8),l.Fc(10,"Reset password"),l.Sb(),l.Sb(),l.Tb(11,"form",9),l.Tb(12,"div",10),l.Tb(13,"div",11),l.Tb(14,"div",12),l.Tb(15,"span",13),l.Pb(16,"i",14),l.Sb(),l.Sb(),l.Tb(17,"input",15),l.bc("focus",(function(t){return o.focusEmail=!0}))("blur",(function(t){return o.focusEmail=!1})),l.Sb(),l.Sb(),l.Dc(18,u,2,1,"ng-container",16),l.Sb(),l.Tb(19,"div",17),l.Tb(20,"button",18),l.bc("click",(function(t){return o.reset()})),l.Fc(21," Reset Password "),l.Sb(),l.Tb(22,"button",19),l.bc("click",(function(t){return o.navigatePage("login")})),l.Tb(23,"span",20),l.Pb(24,"i",21),l.Sb(),l.Tb(25,"span",22),l.Fc(26,"Login"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&t&&(l.Bb(8),l.lc("src",o.imgLogo,l.yc),l.Bb(3),l.lc("formGroup",o.resetForm),l.Bb(1),l.lc("ngClass",l.oc(5,p,!0===o.focusEmail)),l.Bb(6),l.lc("ngForOf",o.resetFormMessages.email),l.Bb(2),l.lc("disabled",!o.resetForm.valid))},directives:[a.a,i.v,i.n,i.g,n.k,i.b,i.m,i.e,n.l,n.m],styles:[".logo-box[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-box[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:9rem}.auth-content[_ngcontent-%COMP%]{background-color:#172b4d;background-image:url(green-leaf-plant.23e9bd3f9e88a0284cf6.jpg);background-repeat:no-repeat;background-size:cover;height:100vh;overflow:hidden}.error-message[_ngcontent-%COMP%]{color:#f5365c;text-align:right;font-size:.8em;padding-top:5px;padding-bottom:0;margin-bottom:0}"]}),t}(),d=e("VNr4");function f(t,o){if(1&t&&(l.Tb(0,"div"),l.Tb(1,"p",27),l.Tb(2,"span"),l.Fc(3),l.Sb(),l.Sb(),l.Sb()),2&t){var e=l.fc().$implicit;l.Bb(3),l.Gc(e.message)}}function h(t,o){if(1&t&&(l.Rb(0),l.Dc(1,f,4,1,"div",26),l.Qb()),2&t){var e=o.$implicit,n=l.fc();l.Bb(1),l.lc("ngIf",n.loginForm.get("username").hasError(e.type)&&(n.loginForm.get("username").dirty||n.loginForm.get("username").touched))}}function v(t,o){if(1&t&&(l.Tb(0,"div"),l.Tb(1,"p",27),l.Tb(2,"span"),l.Fc(3),l.Sb(),l.Sb(),l.Sb()),2&t){var e=l.fc().$implicit;l.Bb(3),l.Gc(e.message)}}function S(t,o){if(1&t&&(l.Rb(0),l.Dc(1,v,4,1,"div",26),l.Qb()),2&t){var e=o.$implicit,n=l.fc();l.Bb(1),l.lc("ngIf",n.loginForm.get("password").hasError(e.type)&&(n.loginForm.get("password").dirty||n.loginForm.get("password").touched))}}var y=function(t){return{focused:t}},T=[{path:"",children:[{path:"forgot",component:m},{path:"login",component:function(){function t(t,o,e,n,i){this.authService=t,this.notifyService=o,this.fb=e,this.loadingBar=n,this.router=i,this.imgLogo="assets/img/logo/mbpj-logo.png",this.loginFormMessages={username:[{type:"required",message:"Email is required"},{type:"email",message:"Please enter a valid email"}],password:[{type:"required",message:"Password is required"},{type:"minLength",message:"Password must have at least 8 characters"}]}}return t.prototype.ngOnInit=function(){this.initForm()},t.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.initForm=function(){this.loginForm=this.fb.group({username:new i.d(null,i.t.compose([i.t.required,i.t.email])),password:new i.d(null,i.t.compose([i.t.required,i.t.minLength(8)]))})},t.prototype.login=function(){var t=this;this.loadingBar.start(),this.authService.obtainToken(this.loginForm.value).subscribe((function(){t.loadingBar.complete()}),(function(){t.loadingBar.complete()}),(function(){t.authService.userRole=1,t.getData()}))},t.prototype.submitEnter=function(t){13===t.keyCode&&this.loginForm.valid&&this.login()},t.prototype.getData=function(){var t=this;this.subscription=Object(d.a)([this.authService.getUserDetail()]).subscribe((function(o){t.loadingBar.complete()}),(function(o){t.loadingBar.complete(),t.notifyService.openToastrWarning("Error","Please try again")}),(function(){t.notifyService.openToastrSuccess("Success","Logging in right now"),t.navigatePage("dashboard-admin")}))},t.prototype.navigatePage=function(t){return"login"==t?this.router.navigate(["/auth/login"]):"forgot"==t?this.router.navigate(["/auth/forgot"]):"dashboard-admin"==t?this.router.navigate(["/admin/dashboard"]):void 0},t.prototype.cheat=function(){this.loginForm.controls.username.patchValue("syafiqbasri@pipeline.com.my"),this.loginForm.controls.password.patchValue("PabloEscobar"),this.login()},t.\u0275fac=function(o){return new(o||t)(l.Ob(s.a),l.Ob(b.a),l.Ob(i.c),l.Ob(a.c),l.Ob(c.e))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-login"]],decls:33,vars:11,consts:[["height","6px","color","#2dce89"],[1,"main-content","auth-content","d-flex","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-7"],[1,"card","bg-secondary","border-0","mb-0"],[1,"card-body","px-lg-5","py-lg-5"],[1,"logo-box"],[1,"logo",3,"src","click"],[3,"formGroup","keydown"],[1,"form-group","mb-3",3,"ngClass"],[1,"input-group","input-group-alternative"],[1,"input-group-prepend"],[1,"input-group-text","bg-info"],[1,"fas","fa-envelope","text-white"],["placeholder","Email","type","email","formControlName","username",1,"form-control",3,"focus","blur"],[4,"ngFor","ngForOf"],[1,"form-group",3,"ngClass"],[1,"fas","fa-lock","text-white"],["placeholder","Password","type","password","formControlName","password",1,"form-control",3,"focus","blur"],[1,"validation-errors"],[1,"row"],[1,"col-12","text-right"],[1,"forget-label",3,"click"],[1,"text-center"],["type","button",1,"btn","btn-info","my-4","btn-block",3,"disabled","click"],[4,"ngIf"],[1,"error-message"]],template:function(t,o){1&t&&(l.Pb(0,"ngx-loading-bar",0),l.Tb(1,"div",1),l.Tb(2,"div",2),l.Tb(3,"div",3),l.Tb(4,"div",4),l.Tb(5,"div",5),l.Tb(6,"div",6),l.Tb(7,"div",7),l.Tb(8,"img",8),l.bc("click",(function(t){return o.cheat()})),l.Sb(),l.Sb(),l.Tb(9,"form",9),l.bc("keydown",(function(t){return o.submitEnter(t)})),l.Tb(10,"div",10),l.Tb(11,"div",11),l.Tb(12,"div",12),l.Tb(13,"span",13),l.Pb(14,"i",14),l.Sb(),l.Sb(),l.Tb(15,"input",15),l.bc("focus",(function(t){return o.focusUsername=!0}))("blur",(function(t){return o.focusUsername=!1})),l.Sb(),l.Sb(),l.Dc(16,h,2,1,"ng-container",16),l.Sb(),l.Tb(17,"div",17),l.Tb(18,"div",11),l.Tb(19,"div",12),l.Tb(20,"span",13),l.Pb(21,"i",18),l.Sb(),l.Sb(),l.Tb(22,"input",19),l.bc("focus",(function(t){return o.focusPassword=!0}))("blur",(function(t){return o.focusPassword=!1})),l.Sb(),l.Sb(),l.Tb(23,"div",20),l.Dc(24,S,2,1,"ng-container",16),l.Sb(),l.Sb(),l.Tb(25,"div",21),l.Tb(26,"div",22),l.Tb(27,"label",23),l.bc("click",(function(t){return o.navigatePage("forgot")})),l.Tb(28,"span"),l.Fc(29,"Forgot password"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(30,"div",24),l.Tb(31,"button",25),l.bc("click",(function(t){return o.login()})),l.Fc(32," Sign in "),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&t&&(l.Bb(8),l.lc("src",o.imgLogo,l.yc),l.Bb(1),l.lc("formGroup",o.loginForm),l.Bb(1),l.lc("ngClass",l.oc(7,y,!0===o.focusUsername)),l.Bb(6),l.lc("ngForOf",o.loginFormMessages.username),l.Bb(1),l.lc("ngClass",l.oc(9,y,!0===o.focusPassword)),l.Bb(7),l.lc("ngForOf",o.loginFormMessages.password),l.Bb(7),l.lc("disabled",!o.loginForm.valid))},directives:[a.a,i.v,i.n,i.g,n.k,i.b,i.m,i.e,n.l,n.m],styles:[".logo-box[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-box[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:9rem}.auth-content[_ngcontent-%COMP%]{background-color:#172b4d;background-image:url(green-leaf-plant.23e9bd3f9e88a0284cf6.jpg);background-repeat:no-repeat;background-size:cover;height:100vh;overflow:hidden}.forget-label[_ngcontent-%COMP%]{font-size:.875rem;cursor:pointer;vertical-align:top}.forget-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;top:2px}.custom-control-label[_ngcontent-%COMP%]{vertical-align:none!important}.error-message[_ngcontent-%COMP%]{color:#f5365c;text-align:right;font-size:.8em;padding-top:5px;padding-bottom:0;margin-bottom:0}"]}),t}()}]}];e.d(o,"AuthModule",(function(){return F}));var F=function(){function t(){}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(o){return new(o||t)},imports:[[n.c,i.h,i.r,r.d.forRoot(),r.i.forRoot(),r.l.forRoot(),a.b,c.h.forChild(T)]]}),t}()}}]);